(this.webpackJsonptime_to_psc_csc=this.webpackJsonptime_to_psc_csc||[]).push([[0],{324:function(e,t,n){e.exports=n(761)},329:function(e,t,n){},357:function(e,t){},359:function(e,t){},368:function(e,t){},370:function(e,t){},395:function(e,t){},397:function(e,t){},398:function(e,t){},403:function(e,t){},405:function(e,t){},412:function(e,t){},414:function(e,t){},432:function(e,t){},435:function(e,t){},451:function(e,t){},454:function(e,t){},480:function(e,t){},591:function(e,t){},760:function(e,t,n){},761:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(319),i=n.n(s),o=(n(329),n(53)),c=n(54),l=n(55),m=n(109),u=n(108),h=n(39),p=n.n(h),d="You should go to the Primary Stroke Center",C="You should go to the Comprehensive Stroke Center",v=function(e){Object(m.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(o.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState({[e.target.name]:e.target.value}),a.triggerHospitalChange([e.target.name],[e.target.value])},a.triggerHospitalChange=function(e,t){p.a.forEach(e,(function(e,n){a.state[e]=t[n]})),a.isCsc()?(a.setState({isCsc:!0}),a.setState({decisionText:C})):(a.setState({isCsc:!1}),a.setState({decisionText:d}))},a.isCsc=function(e){var t=e||a.state,n=t.ttCsc,r=t.ttPsc,s=t.ttBetween,i=t.cscNeedle,o=t.pscNeedle,c=parseInt(n,10),l=parseInt(r,10),m=parseInt(s,10);return!(c+parseInt(i,10)>l+parseInt(o,10)+m)};var r=0,s=15,i=45;e.timeBetween?r=e.timeBetween:e.type!==x&&(r=30),e.timeToPsc&&(s=e.timeToPsc),e.timeToCsc&&(i=e.timeToCsc);var c={cscNeedle:30,pscNeedle:30,ttPsc:s,ttCsc:i,ttBetween:r,cpc:!1,isCsc:!1,decisionText:"You should go to the Primary Stroke Center"};return a.isCsc(c)&&(c.decisionText=C,c.isCsc=!0),a.state=c,a.renderClosestName=a.renderClosestName.bind(Object(l.a)(a)),a.triggerHospitalChange(["decisionText","isCsc"],[c.decisionText,c.isCsc]),a}return Object(c.a)(n,[{key:"renderClosestName",value:function(e,t){if(t)return r.a.createElement("label",null,"Closest ",e,":",r.a.createElement("br",null)," ",t)}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.rangeMessages,a=e.cscName,s=e.pscName,i=e.type,o=this.state,c=o.cscNeedle,l=o.pscNeedle,m=o.ttPsc,u=o.ttCsc,h=o.ttBetween,p=o.isCsc,d=o.decisionText;return r.a.createElement("div",null,r.a.createElement("div",{className:"row mt-3 mb-3"},r.a.createElement("h2",{className:"col-12 text-center"},"Time to ",t)),r.a.createElement("form",null,r.a.createElement("div",{className:"row align-items-center"},r.a.createElement("label",{className:"col-"+(i===x?"6":"4"),htmlFor:"time-to-psc"},"Time to Primary Stroke Center"),r.a.createElement("label",{className:"col-"+(i===x?"6":"4"),htmlFor:"time-to-csc"},"Time to Comprehensive Stroke Center"),r.a.createElement("label",{className:"col-"+(i===x?" d-none":"4"),htmlFor:"time-between"},"Time from Primary Stroke Center to Comprehensive Stroke Center")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-"+(i===x?"6":"4")},r.a.createElement("div",{className:"form-group"},this.renderClosestName("PSC",s),r.a.createElement("input",{className:"form-control",type:"number",name:"ttPsc",id:"time-to-psc",value:m,onChange:this.handleChange}))),r.a.createElement("div",{className:"col-"+(i===x?"6":"4")},r.a.createElement("div",{className:"form-group"},this.renderClosestName("CSC",a),r.a.createElement("input",{className:"form-control",type:"number",name:"ttCsc",id:"time-to-csc",value:u,onChange:this.handleChange}))),r.a.createElement("div",{className:"col-"+(i===x?" d-none":"4")},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"number",name:"ttBetween",id:"time-between",value:h,onChange:this.handleChange})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"pscNeedle"},n[0]," ",l),r.a.createElement("input",{type:"range",min:1,max:120,className:"form-control-range",id:"pscNeedle",name:"pscNeedle",value:l,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"cscNeedle"},n[1]," ",c),r.a.createElement("input",{type:"range",min:1,max:120,className:"form-control-range",id:"cscNeedle",name:"cscNeedle",value:c,onChange:this.handleChange})),r.a.createElement("div",{className:"row align-items-center"},r.a.createElement("div",{className:"col-6 text-right"},r.a.createElement("span",null,"Total time to ",t," if")),r.a.createElement("div",{className:"col-6"},r.a.createElement("p",null,"PSC First: ",r.a.createElement("strong",null,parseInt(this.state.pscNeedle,10)+parseInt(this.state.ttPsc,10)+parseInt(this.state.ttBetween,10))),r.a.createElement("p",null,"CSC First: ",r.a.createElement("strong",null,parseInt(this.state.cscNeedle,10)+parseInt(this.state.ttCsc,10))))),r.a.createElement("div",{className:"form-group"},r.a.createElement("h2",{className:"col-12 text-center alert alert-"+(p?"danger":"dark")},d))))}}]),n}(a.Component),f=n(40),g=n.n(f),k=n(110),N=n(320),y=n.n(N),S=n(321),b=n.n(S),w=new(n(322).Loader)("AIzaSyAGZX9cdeWsmegU4ODemgrLNYuzNhlw6cw",{}),E=function(){function e(){var t=this;Object(o.a)(this,e),this.comprehensiveStrokeCenters=[],this.primaryStrokeCenters=[],this.position={latitude:0,longitude:0},navigator.geolocation&&(this.geo=navigator.geolocation,this.geo.getCurrentPosition((function(e){t.setUserPosition(e)})))}return Object(c.a)(e,[{key:"setUserPosition",value:function(e){this.position={lat:e.coords.latitude,lng:e.coords.longitude}}},{key:"hasCsc",value:function(){return this.comprehensiveStrokeCenters||(this.comprehensiveStrokeCenters=sessionStorage.getItem("csc")),!!this.comprehensiveStrokeCenters}},{key:"hasPsc",value:function(){return this.primaryStrokeCenters||(this.primaryStrokeCenters=sessionStorage.getItem("psc")),!!this.primaryStrokeCenters}},{key:"getComprehensiveCenters",value:function(){var e=Object(k.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasCsc()){e.next=3;break}return e.next=3,this.downloadNewList();case 3:return e.abrupt("return",this.comprehensiveStrokeCenters);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPrimaryCenters",value:function(){var e=Object(k.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasPsc()){e.next=3;break}return e.next=3,this.downloadNewList();case 3:return e.abrupt("return",this.primaryStrokeCenters);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"downloadNewList",value:function(){var e=Object(k.a)(g.a.mark((function e(){var t,n,a,r,s,i,o,c,l=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.position){e.next=5;break}return e.next=3,this.geo.getCurrentPosition();case 3:t=e.sent,this.setUserPosition(t);case 5:return this.comprehensiveStrokeCenters=[],this.primaryStrokeCenters=[],n={uri:"".concat(window.location.href,"/mn-designationlist.html"),transform:function(e){return b.a.load(e)}},e.next=10,y()(n);case 10:return a=e.sent,r=a('h2:contains("Comprehensive Stroke Center")').next("ol").children("li"),p.a.forEach(r,(function(e){l.comprehensiveStrokeCenters.push(l.parseHospital(e))})),s=a('h2:contains("Primary Stroke Centers")').next("ol").children("li"),p.a.forEach(s,(function(e){l.primaryStrokeCenters.push(l.parseHospital(e))})),e.next=17,w.load();case 17:return i=e.sent,o=new i.maps.LatLng(this.position),c=new i.maps.DistanceMatrixService,e.next=22,c.getDistanceMatrix({origins:[o],destinations:this.comprehensiveStrokeCenters.map((function(e){return"".concat(e.name," ").concat(e.city)})),travelMode:"DRIVING"},(function(e){l.comprehensiveStrokeCenters=l.parseDistanceMatrixResults(l.comprehensiveStrokeCenters,e)}));case 22:return e.next=24,c.getDistanceMatrix({origins:[o],destinations:this.primaryStrokeCenters.map((function(e){return"".concat(e.name," ").concat(e.city)})),travelMode:"DRIVING"},(function(e){l.primaryStrokeCenters=l.parseDistanceMatrixResults(l.primaryStrokeCenters,e)}));case 24:return e.next=26,c.getDistanceMatrix({origins:["".concat(this.primaryStrokeCenters[0].name," ").concat(this.primaryStrokeCenters[0].city)],destinations:["".concat(this.comprehensiveStrokeCenters[0].name," ").concat(this.comprehensiveStrokeCenters[0].city)],travelMode:"DRIVING"},(function(e){l.timeBetween=l.parseDistanceMatrixResults([{}],e)[0].timeTo}));case 26:sessionStorage.setItem("csc",this.comprehensiveStrokeCenters),sessionStorage.setItem("psc",this.primaryStrokeCenters);case 28:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDistanceMatrixResults",value:function(e,t){return p.a.forEach(t.rows[0].elements,(function(t,n){"OK"===t.status?(e[n].timeTo=Math.round(t.duration.value/60),e[n].timeToText=t.duration.text,e[n].timeToDistance=t.distance.text):(e[n].timeTo=99999999,e[n].timeToText="Failed Request",e[n].timeToDistance="Failed Request")})),p.a.orderBy(e,"timeTo","asc")}},{key:"getClosest",value:function(e){var t=this,n={longitude:-1,latitude:-1,overall:-1,index:-1};return e.forEach((function(e,a){if(e.location){var r=Math.abs(t.position.longitude-e.location.longitude),s=Math.abs(t.position.latitude-e.location.latitude);(r+s<n.overall||-1===n.overall)&&(n={longitude:r,latitude:s,overall:r+s,index:a,hospital:e})}})),n}},{key:"parseHospital",value:function(e){var t=e.children[0].data,n=(t=(t=t.replace("[\xe2\x80\u2013]","-")).replace(/[^\x00-\x7F]/g,"")).split("-");if(3===n.length){var a=n[1].replace(/.*, /,"");n[0]=n[0]+a,n.splice(1,1)}return n[0]=n[0].trim(),n[1]=n[1].trim(),{name:n[0],city:n[1]}}}]),e}(),T=n(323),x=(n(760),"IV Alteplase"),P=function(e){Object(m.a)(n,e);var t=Object(u.a)(n);function n(e,a){var r;return Object(o.a)(this,n),(r=t.call(this,e,a)).handleTabClick=function(e){e.preventDefault(),r.setState({tab:e.target.name})},r.handleTabClick=r.handleTabClick.bind(Object(l.a)(r)),r.state={tab:x,cscs:[],pscs:[],timeBetween:-1,loading:!0},r.locationHandler=new E,!r.locationHandler.hasCsc()&&r.locationHandler.hasPsc()||r.locationHandler.downloadNewList().then((function(){r.setState({tab:x,cscs:r.locationHandler.comprehensiveStrokeCenters,pscs:r.locationHandler.primaryStrokeCenters,timeBetween:r.locationHandler.timeBetween,loading:!1})})),r}return Object(c.a)(n,[{key:"render",value:function(){var e,t,n,a,s=this.state,i=s.tab,o=s.cscs,c=s.pscs,l=s.timeBetween,m=s.loading;return o.length>0&&c.length>0&&(e=o[0].timeTo,t=c[0].timeTo,n=o[0].name+" "+o[0].city,a=c[0].name+" "+c[0].city),m?r.a.createElement("div",null,T.a("spinner")):r.a.createElement("div",{className:"mt-1"},r.a.createElement("nav",{className:"nav nav-tabs"},r.a.createElement("a",{className:"nav-item nav-link "+(i===x?"active":""),name:x,href:"#/",onClick:this.handleTabClick},"IV Alteplase"),r.a.createElement("a",{className:"nav-item nav-link "+("Thrombectomy"===i?"active":""),name:"Thrombectomy",href:"#/",onClick:this.handleTabClick},"Thrombectomy")),i===x?r.a.createElement(v,{type:x,title:"IV Alteplase",rangeMessages:["PSC Door-to-Needle Time:","CSC Door-to-Needle Time:"],timeToCsc:e,timeToPsc:t,cscName:n,pscName:a}):null,"Thrombectomy"===i?r.a.createElement(v,{type:"Thrombectomy",title:"Arterial Puncture",rangeMessages:["PSC Door-in-Door-out Time:","CSC Door-to-Arterial Puncture Time:"],timeToCsc:e,timeToPsc:t,cscName:n,pscName:a,timeBetween:l}):null)}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[324,1,2]]]);
//# sourceMappingURL=main.e2d4199c.chunk.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{291:function(e,t,n){e.exports=n(695)},296:function(e,t,n){},320:function(e,t){},322:function(e,t){},354:function(e,t){},355:function(e,t){},424:function(e,t){},533:function(e,t){},694:function(e,t,n){},695:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(287),i=n.n(s),o=(n(296),n(47)),c=n(48),l=n(109),m=n(107),u=n(49),h=n(108),p=n(288),d=n(39),C=n.n(d),v="You should go to the Primary Stroke Center",f="You should go to the Comprehensive Stroke Center",g=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(p.a)({},e.target.name,e.target.value)),n.triggerHospitalChange([e.target.name],[e.target.value])},n.triggerHospitalChange=function(e,t){C.a.forEach(e,function(e,a){n.state[e]=t[a]}),n.isCsc()?(n.setState({isCsc:!0}),n.setState({decisionText:f})):(n.setState({isCsc:!1}),n.setState({decisionText:v}))},n.isCsc=function(e){var t=e||n.state,a=t.ttCsc,r=t.ttPsc,s=t.ttBetween,i=t.cscNeedle,o=t.pscNeedle,c=parseInt(a,10),l=parseInt(r,10),m=parseInt(s,10);return!(c+parseInt(i,10)>l+parseInt(o,10)+m)};var a=0,r=15,s=45,i=v;e.timeBetween?a=e.timeBetween:e.type!==P&&(a=30),e.timeToPsc&&(r=e.timeToPsc),e.timeToCsc&&(s=e.timeToCsc);var c={cscNeedle:30,pscNeedle:30,ttPsc:r,ttCsc:s,ttBetween:a,cpc:!1,isCsc:!1,decisionText:i};return n.isCsc(c)&&(c.decisionText=f,c.isCsc=!0),n.state=c,n.renderClosestName=n.renderClosestName.bind(Object(u.a)(n)),n.triggerHospitalChange(["decisionText","isCsc"],[c.decisionText,c.isCsc]),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"renderClosestName",value:function(e,t){if(t)return r.a.createElement("label",null,"Closest ",e,":",r.a.createElement("br",null)," ",t)}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.rangeMessages,a=e.cscName,s=e.pscName,i=e.type,o=this.state,c=o.cscNeedle,l=o.pscNeedle,m=o.ttPsc,u=o.ttCsc,h=o.ttBetween,p=o.isCsc,d=o.decisionText;return r.a.createElement("div",null,r.a.createElement("div",{className:"row mt-3 mb-3"},r.a.createElement("h2",{className:"col-12 text-center"},"Time to ",t)),r.a.createElement("form",null,r.a.createElement("div",{className:"row align-items-center"},r.a.createElement("label",{className:"col-"+(i===P?"6":"4"),htmlFor:"time-to-psc"},"Time to Primary Stroke Center"),r.a.createElement("label",{className:"col-"+(i===P?"6":"4"),htmlFor:"time-to-csc"},"Time to Comprehensive Stroke Center"),r.a.createElement("label",{className:"col-"+(i===P?" d-none":"4"),htmlFor:"time-between"},"Time from Primary Stroke Center to Comprehensive Stroke Center")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-"+(i===P?"6":"4")},r.a.createElement("div",{className:"form-group"},this.renderClosestName("PSC",s),r.a.createElement("input",{className:"form-control",type:"number",name:"ttPsc",id:"time-to-psc",value:m,onChange:this.handleChange}))),r.a.createElement("div",{className:"col-"+(i===P?"6":"4")},r.a.createElement("div",{className:"form-group"},this.renderClosestName("CSC",a),r.a.createElement("input",{className:"form-control",type:"number",name:"ttCsc",id:"time-to-csc",value:u,onChange:this.handleChange}))),r.a.createElement("div",{className:"col-"+(i===P?" d-none":"4")},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"number",name:"ttBetween",id:"time-between",value:h,onChange:this.handleChange})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"pscNeedle"},n[0]," ",l),r.a.createElement("input",{type:"range",min:1,max:120,className:"form-control-range",id:"pscNeedle",name:"pscNeedle",value:l,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"cscNeedle"},n[1]," ",c),r.a.createElement("input",{type:"range",min:1,max:120,className:"form-control-range",id:"cscNeedle",name:"cscNeedle",value:c,onChange:this.handleChange})),r.a.createElement("div",{className:"row align-items-center"},r.a.createElement("div",{className:"col-6 text-right"},r.a.createElement("span",null,"Total time to ",t," if")),r.a.createElement("div",{className:"col-6"},r.a.createElement("p",null,"PSC First: ",r.a.createElement("strong",null,parseInt(this.state.pscNeedle,10)+parseInt(this.state.ttPsc,10)+parseInt(this.state.ttBetween,10))),r.a.createElement("p",null,"CSC First: ",r.a.createElement("strong",null,parseInt(this.state.cscNeedle,10)+parseInt(this.state.ttCsc,10))))),r.a.createElement("div",{className:"form-group"},r.a.createElement("h2",{className:"col-12 text-center alert alert-"+(p?"danger":"dark")},d))))}}]),t}(a.Component),k=n(40),N=n.n(k),y=n(110),w=n(289),S=n.n(w),b=n(290),E=n.n(b),T=n(693);T.KEY="AIzaSyAGZX9cdeWsmegU4ODemgrLNYuzNhlw6cw",T.LIBRARIES=[],T.VERSION="3.36";var x=function(){function e(){var t=this;Object(o.a)(this,e),this.comprehensiveStrokeCenters=[],this.primaryStrokeCenters=[],this.position={latitude:0,longitude:0},navigator.geolocation&&(this.geo=navigator.geolocation,this.geo.getCurrentPosition(function(e){t.setUserPosition(e)}))}return Object(c.a)(e,[{key:"setUserPosition",value:function(e){this.position={lat:e.coords.latitude,lng:e.coords.longitude}}},{key:"hasCsc",value:function(){return this.comprehensiveStrokeCenters||(this.comprehensiveStrokeCenters=sessionStorage.getItem("csc")),!!this.comprehensiveStrokeCenters}},{key:"hasPsc",value:function(){return this.primaryStrokeCenters||(this.primaryStrokeCenters=sessionStorage.getItem("psc")),!!this.primaryStrokeCenters}},{key:"getComprehensiveCenters",value:function(){var e=Object(y.a)(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasCsc()){e.next=3;break}return e.next=3,this.downloadNewList();case 3:return e.abrupt("return",this.comprehensiveStrokeCenters);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getPrimaryCenters",value:function(){var e=Object(y.a)(N.a.mark(function e(){return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.hasPsc()){e.next=3;break}return e.next=3,this.downloadNewList();case 3:return e.abrupt("return",this.primaryStrokeCenters);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"downloadNewList",value:function(){var e=Object(y.a)(N.a.mark(function e(){var t,n,a,r,s,i,o,c=this;return N.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],this.position||t.push(new Promise(function(e){return c.geo.getCurrentPosition(function(t){c.setUserPosition(t),e()})})),e.next=4,Promise.all(t);case 4:return this.comprehensiveStrokeCenters=[],this.primaryStrokeCenters=[],n={uri:"https://www.health.state.mn.us/diseases/cardiovascular/stroke/designationlist.html",mode:"cors",transform:function(e){return E.a.load(e)}},e.next=9,S()(n);case 9:return a=e.sent,r=a('h2:contains("Comprehensive Stroke Center")').next("ol").children("li"),C.a.forEach(r,function(e){c.comprehensiveStrokeCenters.push(c.parseHospital(e))}),s=a('h2:contains("Primary Stroke Centers")').next("ol").children("li"),C.a.forEach(s,function(e){c.primaryStrokeCenters.push(c.parseHospital(e))}),(t=[]).push(new Promise(function(e){T.load(function(t){o=new t.maps.LatLng(c.position),i=new t.maps.DistanceMatrixService,e(i)})})),e.next=18,Promise.all(t);case 18:return(t=[]).push(new Promise(function(e){i.getDistanceMatrix({origins:[o],destinations:c.comprehensiveStrokeCenters.map(function(e){return"".concat(e.name," ").concat(e.city)}),travelMode:"DRIVING"},function(t){c.comprehensiveStrokeCenters=c.parseDistanceMatrixResults(c.comprehensiveStrokeCenters,t),e()})})),t.push(new Promise(function(e){i.getDistanceMatrix({origins:[o],destinations:c.primaryStrokeCenters.map(function(e){return"".concat(e.name," ").concat(e.city)}),travelMode:"DRIVING"},function(t){c.primaryStrokeCenters=c.parseDistanceMatrixResults(c.primaryStrokeCenters,t),e()})})),e.next=23,Promise.all(t);case 23:return(t=[]).push(new Promise(function(e){i.getDistanceMatrix({origins:["".concat(c.primaryStrokeCenters[0].name," ").concat(c.primaryStrokeCenters[0].city)],destinations:["".concat(c.comprehensiveStrokeCenters[0].name," ").concat(c.comprehensiveStrokeCenters[0].city)],travelMode:"DRIVING"},function(t){c.timeBetween=c.parseDistanceMatrixResults([{}],t)[0].timeTo,e()})})),e.next=27,Promise.all(t);case 27:sessionStorage.setItem("csc",this.comprehensiveStrokeCenters),sessionStorage.setItem("psc",this.primaryStrokeCenters);case 29:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"parseDistanceMatrixResults",value:function(e,t){return C.a.forEach(t.rows[0].elements,function(t,n){"OK"===t.status?(e[n].timeTo=Math.round(t.duration.value/60),e[n].timeToText=t.duration.text,e[n].timeToDistance=t.distance.text):(e[n].timeTo=99999999,e[n].timeToText="Failed Request",e[n].timeToDistance="Failed Request")}),C.a.orderBy(e,"timeTo","asc")}},{key:"getClosest",value:function(e){var t=this,n={longitude:-1,latitude:-1,overall:-1,index:-1};return e.forEach(function(e,a){if(e.location){var r=Math.abs(t.position.longitude-e.location.longitude),s=Math.abs(t.position.latitude-e.location.latitude);(r+s<n.overall||-1===n.overall)&&(n={longitude:r,latitude:s,overall:r+s,index:a,hospital:e})}}),n}},{key:"parseHospital",value:function(e){var t=e.children[0].data,n=(t=(t=t.replace("\xe2\x80","-")).replace(/[^\x00-\x7F]/g,"")).split("-");if(3===n.length){var a=n[1].replace(/.*, /,"");n[0]=n[0]+a,n.splice(1,1)}return n[0]=n[0].trim(),n[1]=n[1].trim(),{name:n[0],city:n[1]}}}]),e}(),P=(n(694),"IV Alteplase"),I=function(e){function t(e,n){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e,n))).handleTabClick=function(e){e.preventDefault(),a.setState({tab:e.target.name})},a.handleTabClick=a.handleTabClick.bind(Object(u.a)(a)),a.state={tab:P,cscs:[],pscs:[],timeBetween:-1,loading:!0},a.locationHandler=new x,!a.locationHandler.hasCsc()&&a.locationHandler.hasPsc()||a.locationHandler.downloadNewList().then(function(){a.setState({tab:P,cscs:a.locationHandler.comprehensiveStrokeCenters,pscs:a.locationHandler.primaryStrokeCenters,timeBetween:a.locationHandler.timeBetween,loading:!1})}),a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t,n,a,s=this.state,i=s.tab,o=s.cscs,c=s.pscs,l=s.timeBetween,m=s.loading;return o.length>0&&c.length>0&&(e=o[0].timeTo,t=c[0].timeTo,n=o[0].name+" "+o[0].city,a=c[0].name+" "+c[0].city),m?r.a.createElement("div",null,r.a.createElement("i",{class:"fas fa-sync fa-spin"})):r.a.createElement("div",{className:"mt-1"},r.a.createElement("nav",{className:"nav nav-tabs"},r.a.createElement("a",{className:"nav-item nav-link "+(i===P?"active":""),name:P,href:"#/",onClick:this.handleTabClick},"IV Alteplase"),r.a.createElement("a",{className:"nav-item nav-link "+("Thrombectomy"===i?"active":""),name:"Thrombectomy",href:"#/",onClick:this.handleTabClick},"Thrombectomy")),i===P?r.a.createElement(g,{type:P,title:"IV Alteplase",rangeMessages:["PSC Door-to-Needle Time:","CSC Door-to-Needle Time:"],timeToCsc:e,timeToPsc:t,cscName:n,pscName:a}):null,"Thrombectomy"===i?r.a.createElement(g,{type:"Thrombectomy",title:"Arterial Puncture",rangeMessages:["PSC Door-in-Door-out Time:","CSC Door-to-Arterial Puncture Time:"],timeToCsc:e,timeToPsc:t,cscName:n,pscName:a,timeBetween:l}):null)}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[291,1,2]]]);
//# sourceMappingURL=main.78115bb1.chunk.js.map
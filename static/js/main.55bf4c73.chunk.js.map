{"version":3,"sources":["StrokeTreatment.js","LocationHandler.js","App.js","serviceWorker.js","index.js"],"names":["PscText","CscText","StrokeTreatment","props","handleChange","html","setState","target","name","value","triggerHospitalChange","changedState","_","forEach","thisState","index","state","isCsc","decisionText","ttCsc","ttPsc","ttBetween","cscNeedle","pscNeedle","tc","parseInt","tp","tBetween","defaultBetween","defaultTtPsc","defaultTtCsc","timeBetween","type","THROMBECTOMY","pscList","timeTo","cscList","defaultState","cpc","renderClosestHospital","bind","renderDecisionText","renderSecondaryHospital","label","hospital","city","replace","timeToNeedle","secondaryTimeToMessage","timeDistance","this","title","rangeMessages","className","ALTEPLASE","htmlFor","id","onChange","min","max","Component","googleMapsLoader","Loader","process","LocationHandler","comprehensiveStrokeCenters","observable","primaryStrokeCenters","position","latitude","longitude","downloadNewList","getLocation","hasCsc","hasPsc","options","a","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","lat","coords","lng","sessionStorage","getItem","setUserPosition","axios","url","mdhList","body","cheerio","load","data","csc","next","children","item","push","parseHospital","psc","google","matrixService","maps","DistanceMatrixService","getDistanceMatrix","promisify","userPosition","origins","destinations","map","travelMode","cscResponse","sortedCsc","parseDistanceMatrixResults","pscResponse","sortedPsc","timeBetweenResponse","setItem","hospitalList","response","rows","elements","matrixItem","status","Math","round","duration","timeToText","text","timeToDistance","distance","orderBy","split","length","newHospitalName","splice","trim","App","observer","context","handleTabClick","e","preventDefault","tab","cscs","pscs","loading","locationHandler","then","style","height","paddingTop","icon","faSpinner","spin","size","href","onClick","Boolean","window","location","hostname","match","require","config","ReactDOM","render","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.55bf4c73.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { ALTEPLASE, THROMBECTOMY } from './App';\nimport _ from 'lodash';\n\nconst PscText = 'You should go to {0} (Primary Stroke Center)';\nconst CscText = 'You should go to {0} (Comprehensive Stroke Center)';\n\nclass StrokeTreatment extends Component {\n    constructor(props) {\n        super(props);\n        var defaultBetween = 0, \n            defaultTtPsc = 15,\n            defaultTtCsc = 45,\n            defaultText = PscText,\n            defaultIsCsc = false;\n\n        if (props.timeBetween) {\n            defaultBetween = props.timeBetween;\n        } else if( props.type === THROMBECTOMY) {\n            defaultBetween = 30;\n        }\n        if (props.pscList && props.pscList[0] && props.pscList[0].timeTo) {\n            defaultTtPsc = props.pscList[0].timeTo;\n        }\n        if (props.cscList && props.cscList[0] && props.cscList[0].timeTo) {\n            defaultTtCsc = props.cscList[0].timeTo;\n        }\n\n        const defaultState = {\n            cscNeedle: 30,\n            pscNeedle: 30,\n            ttPsc: defaultTtPsc,\n            ttCsc: defaultTtCsc,\n            ttBetween: defaultBetween,\n            cpc: false,\n            isCsc: defaultIsCsc,\n            decisionText: defaultText\n        };\n\n        if (this.isCsc(defaultState)) {\n            defaultState.decisionText = CscText;\n            defaultState.isCsc = true;\n        }\n\n        this.state = defaultState;\n        this.state['decisionText'] = defaultState.decisionText;\n        this.state['isCsc'] = defaultState.isCsc;\n\n        this.renderClosestHospital = this.renderClosestHospital.bind(this);\n        this.renderDecisionText = this.renderDecisionText.bind(this);\n        this.isCsc = this.isCsc.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.renderSecondaryHospital = this.renderSecondaryHospital.bind(this);\n    }\n\n    handleChange = (html) => {\n        this.setState({ [html.target.name]: html.target.value });\n        \n        this.triggerHospitalChange([html.target.name], [html.target.value]);\n      };\n\n    triggerHospitalChange = (changedState, value) => {\n        _.forEach(changedState, (thisState, index) => {\n            // eslint-disable-next-line\n            this.state[thisState] = value[index];\n        });\n        \n        if (this.isCsc()) {\n            this.setState({ isCsc: true });\n            this.setState({ decisionText: CscText });\n        } else {\n            this.setState({ isCsc: false });\n            this.setState({ decisionText:  PscText });\n        }\n    }\n\n    isCsc = (state) => {\n        let { ttCsc, ttPsc, ttBetween, cscNeedle, pscNeedle } = state || this.state;\n        const tc = parseInt(ttCsc, 10);\n        const tp = parseInt(ttPsc, 10);\n        const tBetween = parseInt(ttBetween, 10);\n\n        const nc = parseInt(cscNeedle, 10);\n        const np = parseInt(pscNeedle, 10);\n        \n        if ((tc + nc) > (tp + np + tBetween)) {\n            return false;\n        } else {\n            return true;\n        }\n    }\n\n    renderClosestHospital(label, hospital) {\n        if (!hospital) {\n            return;\n        }\n        return (\n            <label>Closest {label}:<br/> {hospital.name} - {hospital.city}</label>\n        );\n    }\n\n    renderDecisionText(decisionText, hospital) {\n        const goToText = decisionText.replace(/\\{0\\}/, `${hospital.name} - ${hospital.city}`);\n        return goToText;\n    }\n\n    renderSecondaryHospital(hospital, timeToNeedle, secondaryTimeToMessage) {\n        const timeDistance = parseInt(hospital.timeTo, 10) + parseInt(timeToNeedle, 10)\n        return `${hospital.name} - ${hospital.city} (${secondaryTimeToMessage}: ${timeDistance} minutes)`;\n    }\n\n    render() {\n      const { title, rangeMessages, type, pscList, cscList, secondaryTimeToMessage } = this.props;\n      let { cscNeedle, pscNeedle, ttPsc, ttCsc, ttBetween, isCsc, decisionText } = this.state;\n\n      return (\n        <div>\n          <div className=\"row mt-3 mb-3\">\n            <h2 className=\"col-12 text-center\">Time to {title}</h2>\n          </div>\n          <form>\n          <div className=\"row align-items-center\">\n            <label className={\"col-\" + (type === ALTEPLASE ? '6' : '4')} htmlFor=\"time-to-psc\">Time to Primary Stroke Center</label>\n            <label className={\"col-\" + (type === ALTEPLASE ? '6' : '4')} htmlFor=\"time-to-csc\">Time to Comprehensive Stroke Center</label>\n            <label className={\"col-\" + (type === ALTEPLASE ? ' d-none' : '4')} htmlFor=\"time-between\">Time from Primary Stroke Center to Comprehensive Stroke Center</label>\n          </div>\n\n          <div className=\"row\">\n            <div className={\"col-\" + (type === ALTEPLASE ? '6' : '4')}>\n              <div className=\"form-group\">\n                {this.renderClosestHospital('PSC', pscList[0])}\n                <input className=\"form-control\" type=\"number\" name=\"ttPsc\" id=\"time-to-psc\" value={ttPsc} onChange={this.handleChange}/>\n              </div>\n            </div>\n\n            <div className={\"col-\" + (type === ALTEPLASE ? '6' : '4')}>\n              <div className=\"form-group\">\n                {this.renderClosestHospital('CSC', cscList[0])}\n                <input className=\"form-control\" type=\"number\" name=\"ttCsc\" id=\"time-to-csc\" value={ttCsc} onChange={this.handleChange}/>\n              </div>\n            </div>\n\n\n            <div className={\"col-\" + (type === ALTEPLASE ? ' d-none' : '4')}>\n              <div className=\"form-group\">\n                <input className=\"form-control\" type=\"number\" name=\"ttBetween\" id=\"time-between\" value={ttBetween} onChange={this.handleChange}/>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"form-group\">\n            <label htmlFor=\"pscNeedle\">{rangeMessages[0]} {pscNeedle}</label>\n            <input type=\"range\" min={1} max={120} className=\"form-control-range\" id=\"pscNeedle\" name=\"pscNeedle\" value={pscNeedle} onChange={this.handleChange}></input>\n            <label htmlFor=\"cscNeedle\">{rangeMessages[1]} {cscNeedle}</label>\n            <input type=\"range\" min={1} max={120} className=\"form-control-range\" id=\"cscNeedle\" name=\"cscNeedle\" value={cscNeedle} onChange={this.handleChange}></input>\n          </div>\n\n            <div className=\"row align-items-center\">\n              <div className=\"col-6 text-right\">\n                <span>Total time to {title} if</span>\n              </div>\n              <div className=\"col-6\">\n                <p>PSC First: <strong>{parseInt(this.state.pscNeedle, 10) + parseInt(this.state.ttPsc, 10)}</strong></p>\n                <p>CSC First: <strong>{parseInt(this.state.cscNeedle, 10) + parseInt(this.state.ttCsc, 10)}</strong></p>\n                {type === THROMBECTOMY ? <p>PSC requiring transfer to CSC: <strong>{parseInt(this.state.pscNeedle, 10) + parseInt(this.state.ttPsc, 10) + parseInt(this.state.ttBetween, 10)}</strong></p> : ''}\n              </div>\n            </div>\n            <div className=\"form-group\">\n              <h2 className={\"col-12 text-center alert alert-\" + (isCsc ? 'danger' : 'dark')}>{this.renderDecisionText(decisionText, isCsc ? cscList[0] : pscList[0])}</h2>\n            </div>\n          </form>\n\n          <div className=\"row\">\n            <div className=\"col-6\">\n              <h3>Secondary PSCs</h3>\n              <ul>\n                <li>{this.renderSecondaryHospital(pscList[1], this.state.pscNeedle, secondaryTimeToMessage)}</li>\n                <li>{this.renderSecondaryHospital(pscList[2], this.state.pscNeedle, secondaryTimeToMessage)}</li>\n                <li>{this.renderSecondaryHospital(pscList[3], this.state.pscNeedle, secondaryTimeToMessage)}</li>\n              </ul>\n            </div>\n            <div className=\"col-6\">\n              <h3>Secondary CSCs</h3>\n              <ul>\n                <li>{this.renderSecondaryHospital(cscList[1], this.state.cscNeedle, secondaryTimeToMessage)}</li>\n                <li>{this.renderSecondaryHospital(cscList[2], this.state.cscNeedle, secondaryTimeToMessage)}</li>\n                <li>{this.renderSecondaryHospital(cscList[3], this.state.cscNeedle, secondaryTimeToMessage)}</li>\n              </ul>\n            </div>\n            </div>\n          </div>\n        );\n          \n    }\n}\n\nexport default StrokeTreatment;","import axios from \"axios\";\nimport cheerio from \"cheerio\";\nimport _ from \"lodash\";\nimport { Loader } from 'google-maps';\nimport { observable } from \"mobx\";\nimport { promisify } from 'util';\n\n\nconst options = {/* todo */};\nconst googleMapsLoader = new Loader(process.env.REACT_APP_MAPS_API_KEY, options);\n\nclass LocationHandler { \n  constructor() {\n    this.downloadNewList = this.downloadNewList.bind(this);\n    this.getLocation = this.getLocation.bind(this);\n    this.hasCsc = this.hasCsc.bind(this);\n    this.hasPsc = this.hasPsc.bind(this);\n  }\n\n  comprehensiveStrokeCenters = observable([]);\n  primaryStrokeCenters = observable([]);\n  position = { latitude: 0, longitude: 0 };\n  geo;\n  timeBetween;\n\n  async getLocation(options) {\n    return new Promise(function (resolve, reject) {\n      navigator.geolocation.getCurrentPosition((position) => {\n        resolve(position);\n      });\n    });\n  }\n\n  setUserPosition(position) {\n    this.position = { lat: position.coords.latitude, lng: position.coords.longitude };\n  }\n\n  hasCsc() {\n    if (!this.comprehensiveStrokeCenters) {\n      this.comprehensiveStrokeCenters.replace(sessionStorage.getItem('csc'));\n    }\n    return !!this.comprehensiveStrokeCenters;\n  }\n\n  hasPsc() {\n    if (!this.primaryStrokeCenters) {\n      this.primaryStrokeCenters.replace(sessionStorage.getItem('psc'));\n    }\n    return !!this.primaryStrokeCenters;\n  }\n\n  async downloadNewList() {\n    if ((this.position.longitude === 0 && this.position.latitude === 0) || !this.position) {\n      this.setUserPosition(await this.getLocation());\n    }\n\n    const mdhList = await axios({ url: `https://api.codetabs.com/v1/proxy?quest=https://www.health.state.mn.us/diseases/cardiovascular/stroke/designationlist.html` });\n\n    const body = cheerio.load(mdhList.data);\n\n    const csc = body('h2:contains(\"Comprehensive Stroke Center\")').next('ol').children('li');\n    _.forEach(csc, (item) => {\n      this.comprehensiveStrokeCenters.push(observable(this.parseHospital(item)));\n    });\n    const psc = body('h2:contains(\"Primary Stroke Centers\")').next('ol').children('li');\n    _.forEach(psc, (item) => { \n      this.primaryStrokeCenters.push(observable(this.parseHospital(item)));\n    });\n\n    const google = await googleMapsLoader.load();\n    const matrixService = new google.maps.DistanceMatrixService();\n    const getDistanceMatrix = promisify(matrixService.getDistanceMatrix);\n    const userPosition = this.position;\n\n    try{\n    const cscResponse = await getDistanceMatrix(\n      { origins: [ userPosition ],\n        destinations: this.comprehensiveStrokeCenters.map((csc) => `${csc.name} ${csc.city}` ),\n        travelMode: 'DRIVING',\n    });\n    const sortedCsc = this.parseDistanceMatrixResults(this.comprehensiveStrokeCenters, cscResponse);\n    this.comprehensiveStrokeCenters.replace(sortedCsc);\n  } catch (e) {\n    const sortedCsc = this.parseDistanceMatrixResults(this.comprehensiveStrokeCenters, e);\n    this.comprehensiveStrokeCenters.replace(sortedCsc);\n  }\n\n  try {\n    const pscResponse = await getDistanceMatrix(\n      { origins: [ userPosition ],\n        destinations: this.primaryStrokeCenters.map((psc) => `${psc.name} ${psc.city}` ),\n        travelMode: 'DRIVING',\n      });\n    const sortedPsc = this.parseDistanceMatrixResults(this.primaryStrokeCenters, pscResponse);\n    this.primaryStrokeCenters.replace(sortedPsc);\n  } catch (e) {\n    const sortedPsc = this.parseDistanceMatrixResults(this.primaryStrokeCenters, e);\n    this.primaryStrokeCenters.replace(sortedPsc);\n  }\n\n  try {\n    const timeBetweenResponse = await getDistanceMatrix(\n      { origins: [ `${this.primaryStrokeCenters[0].name} ${this.primaryStrokeCenters[0].city}` ],\n        destinations: [ `${this.comprehensiveStrokeCenters[0].name} ${this.comprehensiveStrokeCenters[0].city}` ],\n        travelMode: 'DRIVING',\n      });\n    this.timeBetween = this.parseDistanceMatrixResults([{}], timeBetweenResponse)[0].timeTo;\n  } catch (e) {\n    this.timeBetween = this.parseDistanceMatrixResults([{}], e)[0].timeTo;\n  }\n\n    sessionStorage.setItem('csc', this.comprehensiveStrokeCenters);\n    sessionStorage.setItem('psc', this.primaryStrokeCenters);\n    return;\n  }\n\n  parseDistanceMatrixResults(hospitalList, response) {\n    _.forEach(response.rows[0].elements, (matrixItem, index) => {\n      if (matrixItem.status === 'OK') {\n        hospitalList[index].timeTo = Math.round(matrixItem.duration.value / 60);//seconds to minutes and round\n        hospitalList[index].timeToText = matrixItem.duration.text;\n        hospitalList[index].timeToDistance = matrixItem.distance.text;\n      } else {\n        hospitalList[index].timeTo = 99999999;\n        hospitalList[index].timeToText = \"Failed Request\";\n        hospitalList[index].timeToDistance = \"Failed Request\";\n      }\n    });\n    const sortedList = _.orderBy(hospitalList, 'timeTo', 'asc');\n    return sortedList;\n  }\n\n  parseHospital(item) {\n    //for some reason they have a multi-part string for a hospital -_- (e.g. Mayo Clinic Hospital – Rochester, Saint Mary’s Campus – Rochester)\n    // We want [\"Mayo Clinic Hospital, Saint Mary’s Campus\", \"Rochester\"]\n    const listItem = item.children[0].data;\n    \n    const properSplit = listItem.replace(/[â–]/g, '-');\n    // eslint-disable-next-line\n    const cleanItem = properSplit.replace(/[^\\x00-\\x7F]/g, \"\");\n    const hospital = cleanItem.split('-');\n    if (hospital.length === 3) {\n      const newHospitalName = hospital[1].replace(/.*, / ,'');\n      hospital[0] = hospital[0] + newHospitalName;\n      hospital.splice(1, 1);\n    }\n\n    return { name: hospital[0].trim(), city: hospital[1].trim() };\n  }\n}\n\nexport default LocationHandler;","import React, { Component } from 'react';\nimport { observer } from 'mobx-react';\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSpinner } from \"@fortawesome/free-solid-svg-icons\";\n\nimport StrokeTreatment from './StrokeTreatment';\nimport LocationHandler from './LocationHandler';\nimport './App.css';\n\nexport const THROMBECTOMY = 'Thrombectomy';\nexport const ALTEPLASE ='IV Alteplase';\n\nconst App = observer(class App extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.handleTabClick = this.handleTabClick.bind(this);\n    this.state = {\n      tab: ALTEPLASE,\n      cscs: [],\n      pscs: [],\n      timeBetween: -1,\n      loading: true\n    };\n    this.locationHandler = new LocationHandler();\n    if (this.locationHandler.hasCsc() || !this.locationHandler.hasPsc()) {\n      this.locationHandler.downloadNewList().then(() => {\n        this.setState({\n          tab: ALTEPLASE,\n          loading: false\n        });\n      });\n    }\n  }\n\n  handleTabClick = (e) => {\n    e.preventDefault();\n    this.setState({ tab: e.target.name });\n  }\n\n  render() {\n    let { tab, loading } = this.state;\n\n    if (loading) {\n      return (<div className=\"row\" style={{height:'50em'}}><div className=\"mx-auto\" style={{paddingTop: '40%'}}><FontAwesomeIcon icon={faSpinner} spin size=\"10x\"/></div></div>);\n    }\n\n    return (\n      <div className=\"mt-1\">\n        <nav className=\"nav nav-tabs\">\n          <a className={\"nav-item nav-link \" + (tab === ALTEPLASE ? 'active': '')} name={ALTEPLASE} href=\"#/\" onClick={this.handleTabClick}>IV Alteplase</a>\n          <a className={\"nav-item nav-link \" + (tab === THROMBECTOMY ? 'active': '')} name={THROMBECTOMY} href=\"#/\" onClick={this.handleTabClick}>Thrombectomy</a>\n        </nav>\n        { tab === ALTEPLASE ? \n            <StrokeTreatment \n              type={ALTEPLASE} \n              title='IV Alteplase' \n              rangeMessages={['PSC Door-to-Needle Time:', 'CSC Door-to-Needle Time:']}\n              secondaryTimeToMessage='time to tPA'\n              cscList={this.locationHandler.comprehensiveStrokeCenters}\n              pscList={this.locationHandler.primaryStrokeCenters} />\n            : null }\n        { tab === THROMBECTOMY ? \n            <StrokeTreatment \n              type={THROMBECTOMY} \n              title='Arterial Puncture'\n              rangeMessages={['PSC Door-in-Door-out Time:', 'CSC Door-to-Arterial Puncture Time:']}\n              secondaryTimeToMessage='time to puncture'\n              timeBetween={this.locationHandler.timeBetween}\n              cscList={this.locationHandler.comprehensiveStrokeCenters}\n              pscList={this.locationHandler.primaryStrokeCenters} />\n            : null }\n      </div>\n    );\n  }\n});\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nrequire('dotenv').config();\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}